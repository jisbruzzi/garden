<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen de ostep.org</title>
    <meta name="description" content="Blog de José Ignacio Sbruzzi.">
    <link rel="stylesheet" href="/garden/style.css">
    <link rel="stylesheet" href="/garden/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/garden/feed/feed.xml" type="application/atom+xml" title="Cuaderno con ideas de José Ignacio Sbruzzi">
    <link rel="alternate" href="/garden/feed/feed.json" type="application/json" title="Cuaderno con ideas de José Ignacio Sbruzzi">
  </head>
  <body>
  <div class="container mx-auto p-4 max-w-2xl">
    <header>
      <h1 class="text-2xl text-center m-8 text-blue-400 font-semibold mx-auto"><a href="/garden/">Cuaderno con ideas de José Ignacio Sbruzzi</a></h1>
    </header>

    <main>
      <div class="prose">
  <h1>Resumen de ostep.org</h1>
  
  <time datetime="2022-03-20">20 Mar 2022</time><a href="/garden/tags/fiuba/" class="post-tag">fiuba</a><a href="/garden/tags/technical/" class="post-tag">technical</a><a href="/garden/tags/cheatsheet/" class="post-tag">cheatsheet</a>
  
  <h1 id="5.-intrlude-process-api" tabindex="-1">5. Intrlude Process API <a class="direct-link" href="#5.-intrlude-process-api" aria-hidden="true">#</a></h1>
<ul>
<li><code>fork()</code>: returns 0 in the child and a pid in the parent</li>
<li><code>exec()</code> y amigos: reemplaza el proceso actual por otro. Nunca retorna.</li>
<li><code>wait()</code>: espera a un child process</li>
<li>Esta API permite lanzar procesos con sus fp (eg stdi/o/e) modificados o algunas diferencias por el estilo.</li>
<li>signals caught with <code>signal()</code> pueden ser enviadas a distintos procesos</li>
</ul>
<h1 id="6.-mechanism:-limited-direct-execution" tabindex="-1">6. Mechanism: Limited Direct Execution <a class="direct-link" href="#6.-mechanism:-limited-direct-execution" aria-hidden="true">#</a></h1>
<h2 id="problem-1:-restricted-oerations" tabindex="-1">Problem 1: Restricted oerations <a class="direct-link" href="#problem-1:-restricted-oerations" aria-hidden="true">#</a></h2>
<ul>
<li>limitación: user mode vs kernel mode (hardware supported)</li>
<li>traps: hardware supported
<ul>
<li>trap table: configured on boot. event -&gt; kernel code address</li>
<li>trap instruction:
<ol>
<li>push registers into per process kernel stack</li>
<li>switch to kernel mode</li>
<li>pass control to os</li>
</ol>
</li>
<li>return-from-trap instruction</li>
</ul>
</li>
</ul>
<h2 id="problem-2:-switching-between-processes" tabindex="-1">Problem 2: Switching between processes <a class="direct-link" href="#problem-2:-switching-between-processes" aria-hidden="true">#</a></h2>
<ul>
<li>Cooperative approach: wait for traps (inseguro: loops infinitos!)</li>
<li>Non-cooperative approach: timers set by the kernel on boot. Causan timer interrupts</li>
<li>trap desde syscall es distinta a timer interrupt</li>
<li>context switch: trap from A, return-from-trap  into B.</li>
</ul>
<h1 id="7.-scheduling:-introduction" tabindex="-1">7. Scheduling: Introduction <a class="direct-link" href="#7.-scheduling:-introduction" aria-hidden="true">#</a></h1>
<ul>
<li>Round robin/time slicing: cambiar de proceso lo más frecuentemente posible</li>
<li>SCTF (Shortest Time-to-Completion First) /SJF (Shortest Job First): Correr el más corto primero</li>
<li>RR maximiza responsiveness, y maximiza average turnaround time. SCTF/SJF al contrario</li>
</ul>
<h1 id="8.-scheduling:-the-multi-level-feedback-queue" tabindex="-1">8. Scheduling:  The Multi-Level Feedback Queue <a class="direct-link" href="#8.-scheduling:-the-multi-level-feedback-queue" aria-hidden="true">#</a></h1>
<ul>
<li>Rules of MLFQ:
<ul>
<li><strong>Rule 1:</strong> If Priority(A) &gt; Priority(B), A runs (B doesn’t).</li>
<li><strong>Rule 2:</strong> If Priority(A) = Priority(B), A &amp; B run in RR using the time slice (quantum length) of the given queue.</li>
<li><strong>Rule 3:</strong> When a job enters the system, it is placed at the highest priority (the topmost queue).</li>
<li><strong>Rule 4:</strong> Once a job uses up its time allotment at a given level (regardless of how many times it has given up the CPU), its priority is reduced (i.e., it moves down one queue).</li>
<li><strong>Rule 5:</strong> After some time period S, move all the jobs in the system to the topmost queue.</li>
</ul>
</li>
<li>Starved job: permanece con poca prioridad</li>
</ul>
<h1 id="9.-scheduling:-proportional-share" tabindex="-1">9. Scheduling: Proportional Share <a class="direct-link" href="#9.-scheduling:-proportional-share" aria-hidden="true">#</a></h1>
<ul>
<li>objetivo: asignar % cpu a cada proceso</li>
<li>Lotería con 100 tickets repartidos de forma proporcional, sacás nro cada time slice
<ul>
<li>ticket currency: cada user tiene un cierto nro de tickets y se pueden convertir al nro de tickets global del sistema</li>
<li>ticket tranfer: un proceso da tickets a otro</li>
<li>ticket inflation: un proceso se da más/menos tickets a sí mismo. Sólo se puede usar si los procesos pueden confiarse entre sí</li>
</ul>
</li>
<li>más time slices -&gt; más fairness</li>
<li>stride scheduling:
<ul>
<li>stride = N / tickets del proceso</li>
<li>cada slice:
<ul>
<li>proceso = el de menor pass</li>
<li>correr proceso</li>
<li>pass[proceso]+=stride[proceso]</li>
</ul>
</li>
<li>stateful (problema introducir procesos)</li>
<li>proporción de ejecución exacta (fairness)</li>
</ul>
</li>
<li>Linux Completely Fair Scheduler:
<ul>
<li><code>vruntime[p]</code>: tiempo virtual que corrió p</li>
<li><code>sched_latency</code>: (casi) completely fair en este intervalo</li>
<li><code>min_granularity</code>: slice = max(min_granularity,sched_latency/num_procesos)</li>
<li>algoritmo: elegir proceso de menor vruntime al terminar el slice</li>
<li>niceness: cada valor de nice se corresponde con un peso. El peso se utiliza para pesar vruntimes al elegir next job</li>
<li>waking up: set vruntime to lowest</li>
</ul>
</li>
</ul>
<h1 id="10.-multiprocessor-scheduling-(advanced)" tabindex="-1">10. Multiprocessor Scheduling (Advanced) <a class="direct-link" href="#10.-multiprocessor-scheduling-(advanced)" aria-hidden="true">#</a></h1>

  <hr>
  <ul><li>Next: <a href="/garden/lo_importante.html">Lo importante: Hacer lo que vine a hacer</a></li><li>Previous: <a href="/garden/cheatsheet-vue3.html">Cheatsheet vue 3</a></li>
  </ul>
</div>
    </main>

    <footer></footer>

    <!-- Current page: /garden/ostep.html -->
  </body>
</html>
